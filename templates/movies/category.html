<!-- templates/movies/category.html -->
{% extends 'base.html' %}
{% block title %}Kategoriya – {{ category.name }}{% endblock %}
{% block content %}

<section class="section">
  <div class="section-head">
    <h1>Kategoriya: {{ category.name }}</h1>
    <form action="" method="get" class="filters glass sm">
      <select name="sort">
        <option value="">Saralash…</option>
        <option value="latest" {% if request.GET.sort == 'latest' %}selected{% endif %}>Eng yangi</option>
        <option value="popular" {% if request.GET.sort == 'popular' %}selected{% endif %}>Mashhur</option>
        <option value="year_desc" {% if request.GET.sort == 'year_desc' %}selected{% endif %}>Yil ↓</option>
        <option value="year_asc" {% if request.GET.sort == 'year_asc' %}selected{% endif %}>Yil ↑</option>
      </select>
      <button class="btn sm" type="submit">Qo‘llash</button>
    </form>
  </div>

  <div class="grid modern">
    {% for m in movies %}
      <a class="card hover-zoom" href="{% url 'movies:detail' m.slug %}">
        <div class="card-media">
          <img src="{{ m.poster.url }}" alt="{{ m.title }}">
          <div class="media-overlay"><button class="play-btn">▶</button></div>
        </div>
        <div class="card-body">
          <h3 class="card-title">{{ m.title }}</h3>
          {% if m.release_year %}<p class="card-meta">{{ m.release_year }}</p>{% endif %}
        </div>
      </a>
    {% empty %}
      <p>Bu kategoriyada hozircha film yo‘q.</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
