{% load static %}
<!DOCTYPE html>


<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Kinokoramiz â€“ Oâ€˜zbekcha kino platforma{% endblock %}</title>
  <meta name="description" content="Kinokoramiz: Oâ€˜zbekcha kino va multfilm platformasi. Qidiruv, kategoriyalar, profil, saqlash va koâ€˜rish tarixi.">
  <meta name="theme-color" content="#0c0f14">

  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body class="theme-dark">

  <!-- HEADER -->
  <header class="header glass">
    <div class="nav-left">
      <a href="/" class="brand">Kinokoramiz</a>
   
    </div>

    <form action="{% url 'movies:search' %}" method="get" class="search">
      <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Film qidirish..." id="globalSearchInput">
      <button type="submit" class="btn primary">Qidirish</button>
    </form>

    <div class="nav-right">
      <button id="themeToggle" class="icon-btn" title="Tema">
        <span class="icon">ðŸŒ™</span>
      </button>
      {% if user.is_authenticated %}
        <a class="user-link" href="{% url 'accounts:profile' %}">{{ user.display_name|default:user.username }}</a>
        <a class="user-link logout" href="{% url 'accounts:logout' %}">Chiqish</a>
      {% else %}
        <a class="user-link login" href="{% url 'accounts:login' %}">Kirish</a>
        <a class="user-link signup" href="{% url 'accounts:signup' %}">Roâ€˜yxatdan oâ€˜tish</a>
      {% endif %}
    </div>
  </header>

  <!-- TOAST MESSAGES -->
  {% if messages %}
  <section class="toasts" id="toasts">
    {% for message in messages %}
      <div class="toast">{{ message }}</div>
    {% endfor %}
  </section>
  {% endif %}

  <!-- MAIN CONTENT -->
  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-inner">
      <p>Â© Kinokoramiz â€” Oâ€˜zbekcha kino platforma</p>
      <p><small>Brend: Murtazotg. Jamiyat uchun sifatli kontent.</small></p>
    </div>
  </footer>

  <!-- JS: Theme toggle + Toast dismiss -->
  <script>
    // Tema almashtirish
    (function(){
      const body = document.body;
      const btn = document.getElementById('themeToggle');
      const stored = localStorage.getItem('theme');
      if(stored){ body.className = stored; }
      btn && btn.addEventListener('click', ()=>{
        const next = body.classList.contains('theme-dark') ? 'theme-light' : 'theme-dark';
        body.className = next; localStorage.setItem('theme', next);
        btn.querySelector('.icon').textContent = next === 'theme-dark' ? 'ðŸŒ™' : 'â˜€ï¸';
      });
    })();

    // Toast xabarlarni avtomatik yoâ€˜qotish
    (function(){
      const box = document.getElementById('toasts');
      if(!box) return;
      setTimeout(()=>{ box.style.opacity = 0; box.style.pointerEvents = 'none'; }, 3000);
    })();
  </script>

</body>
</html>
